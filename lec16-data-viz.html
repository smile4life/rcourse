<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Lindsay Coome &amp; Joel Östblom" />


<title>More on data visualizations and the Git workflow (plus project work)</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/lumen.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<link rel="icon" type="image/png" href="image/favicon.png">
<style type="text/css">

table {
    border-collapse: collapse;
}

thead {
    border-top: solid #DCDCDC;
    border-bottom: solid #DCDCDC;
}

tr.odd {
    background-color: #F8F8F8;
}

tr:last-child {
    border-bottom: solid #DCDCDC;
}

</style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 54px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h2 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h3 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h4 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h5 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h6 {
  padding-top: 59px;
  margin-top: -59px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">EEB313H1</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-map-o"></span>
     
    Syllabus
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-book"></span>
     
    Lectures
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="lec01-introduction.html">Sept. 10: Intro to course, programming, RStudio, and R Markdown</a>
    </li>
    <li>
      <a href="lec02-basic-r.html">Sept. 12: Assignment, vectors, functions</a>
    </li>
    <li>
      <a href="lec03-basic-r.html">Sept. 17: Data frames, intro to dplyr</a>
    </li>
    <li>
      <a href="lec04-dplyr.html">Sept. 19: Data wrangling in dplyr, ggplot, tidy data</a>
    </li>
    <li>
      <a href="lec05-dplyr.html">Sept. 24: More dplyr and ggplot</a>
    </li>
    <li class="dropdown-header">Sept. 26: Exploratory data analysis</li>
    <li class="dropdown-header">Oct. 01: Linear models and statistical modelling</li>
    <li class="dropdown-header">Oct. 03: Mixed effects models</li>
    <li class="dropdown-header">Oct. 08: Simulating data: Randomization tests</li>
    <li class="dropdown-header">Oct. 10: Multivariate stats</li>
    <li class="dropdown-header">Oct. 15: Model selection</li>
    <li class="dropdown-header">Oct. 17: Numerically solving population models</li>
    <li class="dropdown-header">Oct. 22: Time series analysis</li>
    <li class="dropdown-header">Oct. 24: Datasets, hypothesis, begin projects</li>
    <li class="dropdown-header">Oct. 29: Reproducible science</li>
    <li class="dropdown-header">Oct. 31: Reproducible science</li>
    <li class="dropdown-header">Nov. 12: Project work (no lesson)</li>
    <li class="dropdown-header">Nov. 14: Project work (no lesson)</li>
    <li class="dropdown-header">Nov. 19: Project work (no lesson)</li>
    <li class="dropdown-header">Nov. 21: Project work (no lesson)</li>
    <li class="dropdown-header">Nov. 26: Project work (no lesson)</li>
    <li class="dropdown-header">Nov. 28: Project work (no lesson)</li>
    <li class="dropdown-header">Dec. 03: Project work (no lesson)</li>
    <li class="dropdown-header">Dec. 05: Group presentations (no lesson)</li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-book"></span>
     
    Assignments
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Assignment 1</li>
    <li class="dropdown-header">Assignment 2</li>
    <li class="dropdown-header">Assignment 3</li>
    <li class="dropdown-header">Assignment 4</li>
    <li class="dropdown-header">Assignment 5</li>
    <li class="dropdown-header">Assignment 6</li>
    <li class="dropdown-header">Assignment 7</li>
    <li class="dropdown-header">Assignment 8</li>
    <li class="dropdown-header">Final project</li>
  </ul>
</li>
<li>
  <a href="resources.html">
    <span class="fa fa-question"></span>
     
    Resources and FAQ
  </a>
</li>
<li>
  <a href="about.html">
    <span class="fa fa-info"></span>
     
    About
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-bars"></span>
     
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="mailto:ahmed.hasan@mail.utoronto.ca">
        <span class="fa fa-envelope"></span>
         
        Contact
      </a>
    </li>
    <li>
      <a href="https://github.com/uoftcoders/rcourse">
        <span class="fa fa-github"></span>
         
        GitHub
      </a>
    </li>
  </ul>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">More on data visualizations and the Git workflow (plus project work)</h1>
<h4 class="author">Lindsay Coome &amp; Joel Östblom</h4>

</div>


<div id="lesson-preamble" class="section level2">
<h2>Lesson preamble</h2>
<blockquote>
<h3 id="learning-objectives">Learning Objectives</h3>
<ul>
<li>Making better plots for outreach and communication.</li>
<li>How to save your plots.</li>
<li>How to bin and summarise in 2d using hexagons and squares.</li>
<li>How to make your graphs accessible.</li>
<li>Review Git and Github workflow</li>
</ul>
</blockquote>
<blockquote>
<h3 id="lesson-outline">Lesson outline</h3>
<ul>
<li>How to visualize data (review) (5 min)</li>
<li>Saving your graphs (5 min)</li>
<li>Review of plot choice (5 min)</li>
<li>2D histograms, square and hexagonal bins (10 min)</li>
<li>Interactive and quick graphing (10 min)</li>
<li>Graphing and accessability (5 min)</li>
<li>Review Git and Github workflow (20 min)</li>
</ul>
<h3 id="setup">Setup</h3>
<ul>
<li>Load <code>ggplot2</code> (<code>library(&quot;ggplot2&quot;)</code>).</li>
</ul>
</blockquote>
<hr />
</div>
<div id="creating-good-graphics-continued" class="section level2">
<h2>Creating good graphics, continued</h2>
<div id="tuftes-guidelines" class="section level3">
<h3>Tufte’s guidelines</h3>
<ul>
<li>Reduce non-data ink</li>
<li>Enhance the data ink</li>
</ul>
<p>Reduces the proportion of graphic’s ink devoted to the non-redundant display of data-information,</p>
<p>Avoid “chartjunk” - extraneous visual elements that detract from message.</p>
</div>
<div id="colour-rules" class="section level3">
<h3>Colour rules</h3>
<ul>
<li>Large background colours should be quiet, muted to let brighter colors stand out</li>
<li>To highlight some element of a figure, using a bright colour can be effective</li>
<li>However, if brightly colouring this aspect of your figure serves no purpose, leave it greyscale/plain</li>
<li>Here is a reference sheet with all the <a href="http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf">colours and colour names in R</a></li>
</ul>
</div>
<div id="summary" class="section level3">
<h3>Summary</h3>
<ul>
<li>Determine what type of data you have and how your data will be used</li>
<li>Determine how many variable types are in your data</li>
<li>Decide on a visual treatment for each of the variables</li>
<li>Focus on the data in your visual representation</li>
</ul>
</div>
</div>
<div id="more-with-ggplot2" class="section level2">
<h2>More with ggplot2</h2>
<div id="setting-up" class="section level3">
<h3>Setting up</h3>
<p>Load or install the required packages:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(ggplot2)</a></code></pre></div>
</div>
<div id="saving-graphs" class="section level3">
<h3>Saving graphs</h3>
<p>When using ggsave, R by default saves the last graph you plotted. You can also use the GUI to export and save as an image or PDF.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">ggsave</span>(<span class="st">&quot;filename.jpg&quot;</span>)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">ggsave</span>(<span class="st">&quot;filename.jpg&quot;</span>, <span class="dt">width =</span> <span class="dv">20</span>, <span class="dt">height =</span> <span class="dv">20</span>, <span class="dt">units =</span> <span class="st">&quot;cm&quot;</span>)</a></code></pre></div>
<p>One quirk about RStudio is that if you don’t specify the size of the graph, ggsave will save the graph as the same size as it appears in your plots window. This may or may not be what you want.</p>
<p>Try saving this graph:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Sepal.Width, <span class="dt">y =</span> Sepal.Length, <span class="dt">color =</span> Species)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="lec16-data-viz_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
</div>
<div id="oversaturated-graphs-and-plot-choice" class="section level3">
<h3>Oversaturated graphs and plot choice</h3>
<p>Last week we talked about how summary plots (especially bar plots) can sometimes be misleading, and it is often most appropriate/ideal to show every individual observation with a dot plot or the like, perhaps combined with summary markers where appropriate. But, as we discussed last week, what if you have a gigantic data set with a zillion observations? In large data sets, it is often the case that plotting each individual observation would oversaturate the chart.</p>
<p>Let’s actually take a look at an oversaturated chart using one of the native datasets, <code>diamonds</code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="lec16-data-viz_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Because this is a dataset with 53940 observations and we are plotting it on two dimensions, the resulting graph is incredibly oversaturated. Oversaturated graphs make it <em>far more</em> difficult to glean information from the visualization. We’re going to get into a few last methods of dealing with this problem.</p>
<p>First, let’s try making a 2D hexagonal heatmap (really a fancy histogram) with our huge diamonds dataset.</p>
<p>(It might seem like we’re skipping ahead in terms of graph complexity. To learn how to make a super simple histogram with simple count data, see <a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">here</a>)</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">g &lt;-<span class="st"> </span><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price))</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">g <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_hex</span>()</a></code></pre></div>
<pre><code>## Warning: Computation failed in `stat_binhex()`:
## Package `hexbin` required for `stat_binhex`.
## Please install and try again.</code></pre>
<p><img src="lec16-data-viz_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>What has this changed? Now we have a handy legend to the right of our graph indicating the density of points across 2D space in our large dataset. We’ve created our first heat map.</p>
<p>Wikipedia’s definition of a heat map:</p>
<p><a href="https://en.wikipedia.org/wiki/Heat_map">“A heat map (or heatmap) is a graphical representation of data where the individual values contained in a matrix are represented as colors.”</a></p>
<p>We’ve now added additional information to our graph and solved the saturation problem we encountered in our first graph. If you want to change the bin size (i.e. the size of the hexagons), you can do so as such:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">g &lt;-<span class="st"> </span><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price))</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">g <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_hex</span>(<span class="dt">bins =</span> <span class="dv">90</span>)</a></code></pre></div>
<pre><code>## Warning: Computation failed in `stat_binhex()`:
## Package `hexbin` required for `stat_binhex`.
## Please install and try again.</code></pre>
<p><img src="lec16-data-viz_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p><a href="https://ggplot2.tidyverse.org/reference/geom_hex.html">Here</a> are more resources on hexagonal 2D heatmaps.</p>
<p>If we want our heat map to be square, rather than hexagonal, we can use the following geom:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">g &lt;-<span class="st"> </span><span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price))</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">g <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_bin2d</span>()</a></code></pre></div>
<p><img src="lec16-data-viz_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p><a href="https://ggplot2.tidyverse.org/reference/geom_bin2d.html">Documentation for square/rectangular heat maps of 2D bin counts</a></p>
</div>
</div>
<div id="making-your-graphs-accessible" class="section level2">
<h2>Making your graphs accessible</h2>
<div id="choice-of-colors" class="section level3">
<h3>Choice of colors</h3>
<p>Colour blindness is common in the population, and red-green colour blindness in particular affects 8% of men and 0.5% of women. Guidelines for making your visualizations more accessible to people affected by colour blindness, will in many cases also improve the interpretability of your graphs for people who have standard color vision. Here are a couple of examples:</p>
<p>Don’t use jet rainbow-coloured heatmaps. Jet colourmaps are often the default heatmap used in many visualization packages (you’ve probably seen them before).</p>
<p><img src="image/heatmap.png" /></p>
<p>Colour blind viewers are going to have a difficult time distinguishing the meaning of this heat map if some of the colours blend together.</p>
<p><img src="image/colourblind.png" /></p>
<p>The jet colormap should be avoided for other reasons, including that the sharp transitions between colors introduces visual threshold levels that do not represent the underlying continuous data. Another issue is luminance, or brightness. For example, your eye is drawn to the yellow and cyan regions, because the luminance is higher. This can have the unfortunate effect of highlighting features in your data that don’t actually exist, misleading your viewers! It also means that your graph is not going to translate well to greyscale in publication format.</p>
<p>More details about jet can be found in <a href="https://jakevdp.github.io/blog/2014/10/16/how-bad-is-your-colormap/">this blog post</a> and <a href="https://mycarta.wordpress.com/2012/05/12/the-rainbow-is-dead-long-live-the-rainbow-part-1/">this series of posts</a>. In general, when presenting continuous data, a perceptually uniform colormap is often the most suitable choice. This type of colormap ensures that equal steps in data are perceived as equal steps in color space. The human brain perceives changes in lightness as changes in the data much better than, for example, changes in hue. Therefore, colormaps which have monotonically increasing lightness through the colormap will be better interpreted by the viewer. More details and examples of such colormaps are available in the <a href="https://matplotlib.org/users/colormaps.html">matplotlib documentation</a>, and many of the core design principles are outlined in <a href="https://www.youtube.com/watch?v=xAoljeRJ3lU">this entertaining talk</a>. Most of these colormaps are <a href="http://r4ds.had.co.nz/graphics-for-communication.html#fig:brewer">available in R</a>.</p>
<p>Another approach is to use both colours and symbols.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Sepal.Width, <span class="dt">y =</span> Sepal.Length, <span class="dt">color =</span> Species)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">shape =</span> <span class="kw">factor</span>(Species)), <span class="dt">size =</span> <span class="dv">3</span>)</a></code></pre></div>
<p><img src="lec16-data-viz_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<div id="challenge" class="section level4">
<h4>Challenge</h4>
<p>Create any coloured figure you want and go to <a href="https://www.color-blindness.com/coblis-color-blindness-simulator/">this</a> website to upload it to see how it looks to a colour blind person</p>
<p>For more resources, <a href="https://blog.usabilla.com/how-to-design-for-color-blindness/">here</a> is a great usability article for designing for people with colour blindness.</p>
</div>
</div>
<div id="more-resources-on-ggplot2" class="section level3">
<h3>More resources on ggplot2</h3>
<ul>
<li><a href="http://had.co.nz/ggplot2/">ggplot2 documentation</a></li>
<li><a href="https://www.amazon.com/ggplot2-Elegant-Graphics-Data-Analysis/dp/0387981403">Book by Hadley Wickham</a></li>
<li><a href="https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf">ggplot2 cheat sheet</a></li>
<li><a href="https://www.r-graph-gallery.com/all-graphs/">r graph gallery for inspiration (not just limited to ggplot2 graphs)</a></li>
</ul>
</div>
</div>
<div id="git-and-github-workflow-review" class="section level2">
<h2>Git and GitHub workflow review</h2>
<p>First, let’s create a chat room for your repository. We will use gitter, since it has good integrations with GitHub. Go to <a href="https://gitter.im/" class="uri">https://gitter.im/</a>, login with your GitHub account and click the plus sign to create a new chat room. Browse to your repository, and add the members of your team. Since your repository is public, this chatroom will also be public (so you might not want to share personal information, and keep your discussions on topic, just as if this was a real-world work project).</p>
<p>Discussions in the chat room are good to crystallize what tasks need to be tackled next. Once you have identified a specific task, open an issue about it on GitHub to track the progress of that particular tasks. You should create issues for your planned analyses, writing, literature review, etc. Then schedule those into your day and close them when you are done with that task. It is similar to a powerful task manager for your project. In general, you should create issues in the main repository, not in your own fork of the repository. Let’s create a new issue based on our discussion, assign the person we think should work on it, and then review the workflow for addressing the issue.</p>
<div id="sample-workflow-for-addressing-an-issue" class="section level3">
<h3>Sample workflow for addressing an issue</h3>
<p>Let’s say we want to create and upload a new file to GitHub. After we have created the issue for this task, we go about it as follows.</p>
<ol style="list-style-type: decimal">
<li>Create your own fork of the online Git repository via the GitHub interface.</li>
<li>Click the green <code>Clone or download</code> button to copy the Git URL.</li>
<li>In RStudio, open a new Git project.
<ul>
<li><code>File -&gt; Version Control -&gt; Git</code>. Paste the URL you copied previously and select where to save the directory.</li>
</ul></li>
<li>Click <code>Create Project</code>
<ul>
<li>You can now see the new directory if you navigate to it in your file navigator.</li>
</ul></li>
<li>In RStudio, click <code>History</code> under the small Git button menu.
<ul>
<li>This is similar to typing <code>git log --oneline --graph</code> in terminal.</li>
</ul></li>
<li>Before we add something to this repository, it is good practice to create a new branch instead of working on the default master branch. Branches allow you to work on features separately and can make it clearer what is what when merging your code with others.
<ul>
<li>This is the only step that <em>has to</em> to be done from the command line.</li>
<li>Open a terminal, navigate to the new directory just created via RStudio, and type <code>git checkout -b &lt;branchname&gt;</code> to create and switch to a new branch. You can also switch branches in RStudio via a dropdown menu.
<ul>
<li>You could do the navigation in your file browser and then right click to open a terminal. Right click in the file browser should be enabled by default with GitBash on Windows. For Mac’s Finder, follow <a href="https://stackoverflow.com/a/7054045/2166823">these instructions</a> (in brief <code>System Preferences &gt; Keyboard &gt; Shortcuts &gt; Services</code>).</li>
</ul></li>
</ul></li>
<li>Create a new text file in RStudio and add some text.</li>
<li>Save the file locally in the Git directory that you created via RStudio.
<ul>
<li>These changes are not saved into your Git history until you explicitly tell Git to save them.</li>
</ul></li>
<li>Before saving (committing) into the Git repository, click <code>Diff &lt;filename&gt;</code> in the RStudio Git menu, to see the differences between your current working directory and what you have saved in the Git repository since previously.
<ul>
<li>This would be the same as typing <code>git diff &lt;filename&gt;</code> in the terminal.</li>
</ul></li>
<li>The differences are what we expect, so let’s click <code>Stage</code> (either the checkbox or the button).
<ul>
<li>This would be the same as typing <code>git add &lt;filename&gt;</code> in terminal (adding the file to the “staging area”.</li>
</ul></li>
<li>Now we can commit our changes, which means saving them into our local Git repository. Add a commit message and click <code>Commit</code>.
<ul>
<li>This would be the same as typing <code>git commit &lt;filename&gt; -m 'Your commit message here'</code> in terminal.</li>
<li>The reason you are staging first and then committing, instead of just “saving” in one step, is that this workflow gives more power and more flexibility. For example, it allows you to stage partial changes from a file or changes from several files and then commit them together as one commit because they are addressing the same issue.</li>
</ul></li>
<li>You can now see your commit in the <code>History</code> tab (might need to press refresh). You might also notice that your forked GitHub repository online (<code>origin</code>) is one commit behind your local Git repo. This is because we have not uploaded our changes yet.
<ul>
<li>Remember that <code>origin</code> is just an alias (nickname) on your computer to the URL of your online Git storage location (GitHub in this case), so that you don’t have to type the full URL each time. You could have called this anything, but <code>origin</code> is the convention.</li>
</ul></li>
<li>To upload the changes to your fork, press <code>Push Branch</code> in the Git menu.
<ul>
<li>This would be the same as typing <code>git push</code> in terminal.</li>
<li>Refresh your history to see that all the branches are now on the same commit.</li>
</ul></li>
<li>Finally you want to suggest that the changes from our fork are included in the main repository. This is where your collaborators come back into the picture. You want to request that whoever has control over the main repository reviews your changes and pulls them into the main repository if they look good.
<ul>
<li>This is usually done via the GitHub.com interface. If you go to the main repository or your fork, you will see a link has popped up that asks you to perform a pull request (PR).</li>
</ul></li>
<li>After the code has been pulled into the main repository (merged) you can close the issue!
<ul>
<li>You could also have closed the issue via the PR directly, by adding <code>'close #&lt;issue_number&gt;'</code> to the commit message (in this case <code>close #1</code>).</li>
</ul></li>
</ol>
<p>Done!</p>
<p>One additional note to save you some potential headaches (also called merge conflicts…). If you are not working from a Git repository that you just cloned, you should make sure that the master branch of your local fork of the repository, is up to date with the latest commit on the master branch of the main repository, before you create a new branch. Put another way: if someone else has made changes to the main repository, you want those in your fork before you start working on new features.</p>
<p>If you type <code>git remote -v</code> inside your repository, you will see that it currently only has one remote (online storage location) specified, which is your fork with the alias <code>origin</code>. To add the main repository, go to its GitHub page and click the green button <code>Clone or download</code>, copy the URL, and pasted into this command <code>git remote add upstream &lt;pasted_url&gt;</code>. The name <code>upstream</code> is a convention, and it will be the alias to this URL. Now you can sync your local master branch with the upstream master branch: <code>git pull upstream/master master</code>. These changes (and any other changes you add) will be uploaded to your fork’s GitHub location next time you push.</p>
</div>
</div>


<hr>

<p>This work is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>. See the <a href="LICENSE.html">licensing</a> page for more details about copyright information.</p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = false;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
